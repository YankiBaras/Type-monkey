<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Type monkey</title>
</head>
<body>
    <h1>Type monkey</h1>
    <input type="text" id="input">
    <button onclick="reset()">&#8634;</button>

    <div id="container">
    </div>
    <script>
        const WORDS = 10;
        const container = document.getElementById('container');

        let array = [
        'whisper',
        'employ',
        'equal',
        'paragraph',
        'passive',
        'shelf',
        'mile',
        'comment',
        'familiar',
        'hardship'
        ]
        let shuffledArray = array.sort((a, b) => 0.5 - Math.random());
        const inp = document.getElementById('input');
        let count = 0;
        let spans;


        window.addEventListener('load', () => {
            for (let i = 0; i < WORDS; i++) {
                let ell = document.createElement('span');
                ell.id = `a${i}`;
                ell.style.margin = '2px';
                container.appendChild(ell);
                ell.innerHTML = shuffledArray[i];
                spans = document.querySelectorAll('span');
            }})

        function reset() {
            let newArr = shuffledArray.sort((a, b) => 0.5 - Math.random());
            shuffledArray = newArr;
            count = 0;
            for (let i = 0; i < WORDS; i++) {
                let cur = spans[i];
                cur.innerHTML = shuffledArray[i];
                cur.style.color = 'black';
                }
        }
        
        function myFunction(item) {
            if (inp.value.slice(0, -1) === shuffledArray[count]) {
                item.style.color = 'green';
                inp.value = '';
                count++;
            } else {
                item.style.color = 'red';
                item.style.backgroundColor = 'white';
                inp.value = '';
                count++; }}
        

        inp.addEventListener('keyup', event => {
            if (event.code === 'Space') {                
                myFunction(spans[count]);
                            }});

        inp.addEventListener('keyup', event => {
            if (event.code != 'Space') {
            let curr = inp.value;
            if (curr != shuffledArray[count].slice(0, curr.length)) {
                spans[count].style.backgroundColor = 'red';
             } else {
                spans[count].style.backgroundColor = 'white';
             }}
        })
        
    </script>
    </body>
</html>